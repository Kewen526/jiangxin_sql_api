{
  "api": [
    {
      "id": "SYS_API_001",
      "access": 1,
      "alarmPlugins": null,
      "cachePlugin": null,
      "contentType": "application/json",
      "createTime": "2024-12-09 21:56:00",
      "createUserId": 1,
      "dagData": null,
      "globalTransformPlugin": null,
      "graphData": null,
      "groupId": "SYSTEM_USER_MGMT",
      "jsonParam": null,
      "name": "获取用户列表",
      "note": "查询租户下的所有用户列表，支持分页",
      "paramProcessPlugin": null,
      "paramRules": null,
      "params": "[{\"name\":\"tenant_id\",\"type\":\"string\",\"required\":true,\"description\":\"租户ID\"},{\"name\":\"page\",\"type\":\"number\",\"required\":false,\"description\":\"页码（默认1）\"},{\"name\":\"page_size\",\"type\":\"number\",\"required\":false,\"description\":\"每页数量（默认20）\"}]",
      "paramsJson": null,
      "path": "/api/system/users/list",
      "status": 1,
      "task": "[{\"taskType\":1,\"datasourceId\":\"PLATFORM\",\"sqlList\":[{\"transformPlugin\":null,\"transformPluginParam\":null,\"sqlText\":\"SELECT id, tenant_id, email, role, status, created_at, updated_at FROM users WHERE tenant_id = #{tenant_id} ORDER BY created_at DESC LIMIT 100\",\"id\":\"sql_001\"}],\"transaction\":0}]",
      "taskJson": null,
      "testParams": null,
      "transformScript": null,
      "type": null,
      "updateTime": "2024-12-09 21:56:00"
    },
    {
      "id": "SYS_API_002",
      "access": 1,
      "alarmPlugins": null,
      "cachePlugin": null,
      "contentType": "application/json",
      "createTime": "2024-12-09 21:56:00",
      "createUserId": 1,
      "dagData": null,
      "globalTransformPlugin": null,
      "graphData": null,
      "groupId": "SYSTEM_USER_MGMT",
      "jsonParam": null,
      "name": "获取用户详情",
      "note": "根据用户ID获取用户详细信息",
      "paramProcessPlugin": null,
      "paramRules": null,
      "params": "[{\"name\":\"user_id\",\"type\":\"string\",\"required\":true,\"description\":\"用户ID\"},{\"name\":\"tenant_id\",\"type\":\"string\",\"required\":true,\"description\":\"租户ID\"}]",
      "paramsJson": null,
      "path": "/api/system/users/detail",
      "status": 1,
      "task": "[{\"taskType\":1,\"datasourceId\":\"PLATFORM\",\"sqlList\":[{\"transformPlugin\":null,\"transformPluginParam\":null,\"sqlText\":\"SELECT u.id, u.tenant_id, u.email, u.role, u.status, u.created_at, u.updated_at, t.name as tenant_name FROM users u LEFT JOIN tenants t ON u.tenant_id = t.id WHERE u.id = #{user_id} AND u.tenant_id = #{tenant_id}\",\"id\":\"sql_002\"}],\"transaction\":0}]",
      "taskJson": null,
      "testParams": null,
      "transformScript": null,
      "type": null,
      "updateTime": "2024-12-09 21:56:00"
    },
    {
      "id": "SYS_API_003",
      "access": 1,
      "alarmPlugins": null,
      "cachePlugin": null,
      "contentType": "application/json",
      "createTime": "2024-12-09 21:56:00",
      "createUserId": 1,
      "dagData": null,
      "globalTransformPlugin": null,
      "graphData": null,
      "groupId": "SYSTEM_USER_MGMT",
      "jsonParam": null,
      "name": "检查邮箱是否存在",
      "note": "创建用户前检查邮箱是否已被注册",
      "paramProcessPlugin": null,
      "paramRules": null,
      "params": "[{\"name\":\"email\",\"type\":\"string\",\"required\":true,\"description\":\"邮箱地址\"}]",
      "paramsJson": null,
      "path": "/api/system/users/check_email",
      "status": 1,
      "task": "[{\"taskType\":1,\"datasourceId\":\"PLATFORM\",\"sqlList\":[{\"transformPlugin\":null,\"transformPluginParam\":null,\"sqlText\":\"SELECT COUNT(*) as count FROM users WHERE email = #{email}\",\"id\":\"sql_003\"}],\"transaction\":0}]",
      "taskJson": null,
      "testParams": null,
      "transformScript": null,
      "type": null,
      "updateTime": "2024-12-09 21:56:00"
    },
    {
      "id": "SYS_API_004",
      "access": 1,
      "alarmPlugins": null,
      "cachePlugin": null,
      "contentType": "application/json",
      "createTime": "2024-12-09 21:56:00",
      "createUserId": 1,
      "dagData": null,
      "globalTransformPlugin": null,
      "graphData": null,
      "groupId": "SYSTEM_USER_MGMT",
      "jsonParam": null,
      "name": "更新用户状态",
      "note": "启用或禁用用户账号",
      "paramProcessPlugin": null,
      "paramRules": null,
      "params": "[{\"name\":\"user_id\",\"type\":\"string\",\"required\":true,\"description\":\"用户ID\"},{\"name\":\"tenant_id\",\"type\":\"string\",\"required\":true,\"description\":\"租户ID\"},{\"name\":\"status\",\"type\":\"number\",\"required\":true,\"description\":\"状态（1=启用，0=禁用）\"}]",
      "paramsJson": null,
      "path": "/api/system/users/update_status",
      "status": 1,
      "task": "[{\"taskType\":1,\"datasourceId\":\"PLATFORM\",\"sqlList\":[{\"transformPlugin\":null,\"transformPluginParam\":null,\"sqlText\":\"UPDATE users SET status = #{status}, updated_at = NOW() WHERE id = #{user_id} AND tenant_id = #{tenant_id}\",\"id\":\"sql_004\"}],\"transaction\":0}]",
      "taskJson": null,
      "testParams": null,
      "transformScript": null,
      "type": null,
      "updateTime": "2024-12-09 21:56:00"
    },
    {
      "id": "SYS_API_005",
      "access": 1,
      "alarmPlugins": null,
      "cachePlugin": null,
      "contentType": "application/json",
      "createTime": "2024-12-09 21:56:00",
      "createUserId": 1,
      "dagData": null,
      "globalTransformPlugin": null,
      "graphData": null,
      "groupId": "SYSTEM_USER_MGMT",
      "jsonParam": null,
      "name": "更新用户角色",
      "note": "修改用户的权限角色",
      "paramProcessPlugin": null,
      "paramRules": null,
      "params": "[{\"name\":\"user_id\",\"type\":\"string\",\"required\":true,\"description\":\"用户ID\"},{\"name\":\"tenant_id\",\"type\":\"string\",\"required\":true,\"description\":\"租户ID\"},{\"name\":\"role\",\"type\":\"string\",\"required\":true,\"description\":\"角色（admin/developer/viewer）\"}]",
      "paramsJson": null,
      "path": "/api/system/users/update_role",
      "status": 1,
      "task": "[{\"taskType\":1,\"datasourceId\":\"PLATFORM\",\"sqlList\":[{\"transformPlugin\":null,\"transformPluginParam\":null,\"sqlText\":\"UPDATE users SET role = #{role}, updated_at = NOW() WHERE id = #{user_id} AND tenant_id = #{tenant_id}\",\"id\":\"sql_005\"}],\"transaction\":0}]",
      "taskJson": null,
      "testParams": null,
      "transformScript": null,
      "type": null,
      "updateTime": "2024-12-09 21:56:00"
    },
    {
      "id": "SYS_API_006",
      "access": 1,
      "alarmPlugins": null,
      "cachePlugin": null,
      "contentType": "application/json",
      "createTime": "2024-12-09 21:56:00",
      "createUserId": 1,
      "dagData": null,
      "globalTransformPlugin": null,
      "graphData": null,
      "groupId": "SYSTEM_USER_MGMT",
      "jsonParam": null,
      "name": "删除用户",
      "note": "删除用户账号（软删除，设置status=0）",
      "paramProcessPlugin": null,
      "paramRules": null,
      "params": "[{\"name\":\"user_id\",\"type\":\"string\",\"required\":true,\"description\":\"用户ID\"},{\"name\":\"tenant_id\",\"type\":\"string\",\"required\":true,\"description\":\"租户ID\"}]",
      "paramsJson": null,
      "path": "/api/system/users/delete",
      "status": 1,
      "task": "[{\"taskType\":1,\"datasourceId\":\"PLATFORM\",\"sqlList\":[{\"transformPlugin\":null,\"transformPluginParam\":null,\"sqlText\":\"UPDATE users SET status = 0, updated_at = NOW() WHERE id = #{user_id} AND tenant_id = #{tenant_id}\",\"id\":\"sql_006\"}],\"transaction\":0}]",
      "taskJson": null,
      "testParams": null,
      "transformScript": null,
      "type": null,
      "updateTime": "2024-12-09 21:56:00"
    },
    {
      "id": "SYS_API_007",
      "access": 1,
      "alarmPlugins": null,
      "cachePlugin": null,
      "contentType": "application/json",
      "createTime": "2024-12-09 21:56:00",
      "createUserId": 1,
      "dagData": null,
      "globalTransformPlugin": null,
      "graphData": null,
      "groupId": "SYSTEM_USER_MGMT",
      "jsonParam": null,
      "name": "获取租户信息",
      "note": "根据租户ID获取租户详细信息",
      "paramProcessPlugin": null,
      "paramRules": null,
      "params": "[{\"name\":\"tenant_id\",\"type\":\"string\",\"required\":true,\"description\":\"租户ID\"}]",
      "paramsJson": null,
      "path": "/api/system/tenants/detail",
      "status": 1,
      "task": "[{\"taskType\":1,\"datasourceId\":\"PLATFORM\",\"sqlList\":[{\"transformPlugin\":null,\"transformPluginParam\":null,\"sqlText\":\"SELECT id, name, status, created_at, updated_at FROM tenants WHERE id = #{tenant_id}\",\"id\":\"sql_007\"}],\"transaction\":0}]",
      "taskJson": null,
      "testParams": null,
      "transformScript": null,
      "type": null,
      "updateTime": "2024-12-09 21:56:00"
    },
    {
      "id": "SYS_API_008",
      "access": 1,
      "alarmPlugins": null,
      "cachePlugin": null,
      "contentType": "application/json",
      "createTime": "2024-12-09 21:56:00",
      "createUserId": 1,
      "dagData": null,
      "globalTransformPlugin": null,
      "graphData": null,
      "groupId": "SYSTEM_USER_MGMT",
      "jsonParam": null,
      "name": "用户统计",
      "note": "获取租户下的用户统计信息",
      "paramProcessPlugin": null,
      "paramRules": null,
      "params": "[{\"name\":\"tenant_id\",\"type\":\"string\",\"required\":true,\"description\":\"租户ID\"}]",
      "paramsJson": null,
      "path": "/api/system/users/stats",
      "status": 1,
      "task": "[{\"taskType\":1,\"datasourceId\":\"PLATFORM\",\"sqlList\":[{\"transformPlugin\":null,\"transformPluginParam\":null,\"sqlText\":\"SELECT COUNT(*) as total_users, SUM(CASE WHEN status = 1 THEN 1 ELSE 0 END) as active_users, SUM(CASE WHEN role = 'admin' THEN 1 ELSE 0 END) as admin_count, SUM(CASE WHEN role = 'developer' THEN 1 ELSE 0 END) as developer_count, SUM(CASE WHEN role = 'viewer' THEN 1 ELSE 0 END) as viewer_count FROM users WHERE tenant_id = #{tenant_id}\",\"id\":\"sql_008\"}],\"transaction\":0}]",
      "taskJson": null,
      "testParams": null,
      "transformScript": null,
      "type": null,
      "updateTime": "2024-12-09 21:56:00"
    },
    {
      "id": "SYS_API_009",
      "access": 1,
      "alarmPlugins": null,
      "cachePlugin": null,
      "contentType": "application/json",
      "createTime": "2024-12-09 21:56:00",
      "createUserId": 1,
      "dagData": null,
      "globalTransformPlugin": null,
      "graphData": null,
      "groupId": "SYSTEM_USER_MGMT",
      "jsonParam": null,
      "name": "搜索用户",
      "note": "根据邮箱或角色搜索用户",
      "paramProcessPlugin": null,
      "paramRules": null,
      "params": "[{\"name\":\"tenant_id\",\"type\":\"string\",\"required\":true,\"description\":\"租户ID\"},{\"name\":\"keyword\",\"type\":\"string\",\"required\":false,\"description\":\"搜索关键词（邮箱）\"},{\"name\":\"role\",\"type\":\"string\",\"required\":false,\"description\":\"角色筛选\"}]",
      "paramsJson": null,
      "path": "/api/system/users/search",
      "status": 1,
      "task": "[{\"taskType\":1,\"datasourceId\":\"PLATFORM\",\"sqlList\":[{\"transformPlugin\":null,\"transformPluginParam\":null,\"sqlText\":\"SELECT id, tenant_id, email, role, status, created_at FROM users WHERE tenant_id = #{tenant_id} AND (email LIKE CONCAT('%', COALESCE(#{keyword}, ''), '%')) AND (role = #{role} OR #{role} IS NULL) ORDER BY created_at DESC LIMIT 50\",\"id\":\"sql_009\"}],\"transaction\":0}]",
      "taskJson": null,
      "testParams": null,
      "transformScript": null,
      "type": null,
      "updateTime": "2024-12-09 21:56:00"
    },
    {
      "id": "SYS_API_010",
      "access": 1,
      "alarmPlugins": null,
      "cachePlugin": null,
      "contentType": "application/json",
      "createTime": "2024-12-09 21:56:00",
      "createUserId": 1,
      "dagData": null,
      "globalTransformPlugin": null,
      "graphData": null,
      "groupId": "SYSTEM_USER_MGMT",
      "jsonParam": null,
      "name": "验证用户权限",
      "note": "验证用户是否有指定权限（角色检查）",
      "paramProcessPlugin": null,
      "paramRules": null,
      "params": "[{\"name\":\"user_id\",\"type\":\"string\",\"required\":true,\"description\":\"用户ID\"},{\"name\":\"tenant_id\",\"type\":\"string\",\"required\":true,\"description\":\"租户ID\"},{\"name\":\"required_role\",\"type\":\"string\",\"required\":true,\"description\":\"所需角色（admin/developer/viewer）\"}]",
      "paramsJson": null,
      "path": "/api/system/users/verify_permission",
      "status": 1,
      "task": "[{\"taskType\":1,\"datasourceId\":\"PLATFORM\",\"sqlList\":[{\"transformPlugin\":null,\"transformPluginParam\":null,\"sqlText\":\"SELECT id, role, status, CASE WHEN status = 1 AND (role = #{required_role} OR role = 'admin') THEN 1 ELSE 0 END as has_permission FROM users WHERE id = #{user_id} AND tenant_id = #{tenant_id}\",\"id\":\"sql_010\"}],\"transaction\":0}]",
      "taskJson": null,
      "testParams": null,
      "transformScript": null,
      "type": null,
      "updateTime": "2024-12-09 21:56:00"
    }
  ]
}
