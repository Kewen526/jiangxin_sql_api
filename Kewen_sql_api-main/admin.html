<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ”§ API ç®¡ç†ç³»ç»Ÿ</title>
  <style>
    /* ===== CSS Variables (VS Codeé£æ ¼é…è‰²) ===== */
    :root {
      --bg-primary: #1e1e1e;
      --bg-secondary: #252526;
      --bg-tertiary: #2d2d30;
      --bg-hover: #2a2d2e;
      --border-color: #3e3e42;
      --text-primary: #cccccc;
      --text-secondary: #969696;
      --accent-blue: #007acc;
      --accent-light: #4fc3f7;
      --accent-success: #4caf50;
      --accent-warning: #ff9800;
      --accent-danger: #f44336;
      --shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    /* ===== å…¨å±€æ ·å¼ ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace, 'Microsoft YaHei', sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      height: 100vh;
      overflow: hidden;
    }

    /* ===== é¡¶éƒ¨å¯¼èˆªæ  ===== */
    .header {
      height: 50px;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .logo {
      font-size: 18px;
      font-weight: 600;
      color: var(--accent-light);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .header-stats {
      display: flex;
      gap: 20px;
      font-size: 13px;
      color: var(--text-secondary);
    }

    .stat-item {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .stat-value {
      color: var(--accent-light);
      font-weight: 600;
    }

    .header-actions {
      display: flex;
      gap: 10px;
    }

    /* ===== ä¸»ä½“å¸ƒå±€ ===== */
    .main-container {
      display: flex;
      height: calc(100vh - 50px);
      overflow: hidden;
    }

    /* ===== å·¦ä¾§è¾¹æ  ===== */
    .sidebar {
      width: 300px;
      background: var(--bg-secondary);
      border-right: 1px solid var(--border-color);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .sidebar-header {
      padding: 15px;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .sidebar-title {
      font-size: 12px;
      text-transform: uppercase;
      color: var(--text-secondary);
      letter-spacing: 1px;
    }

    .sidebar-content {
      flex: 1;
      overflow-y: auto;
      padding: 10px 0;
    }

    /* ===== æ ‘å½¢èœå• ===== */
    .tree-group {
      margin-bottom: 5px;
    }

    .group-header {
      padding: 8px 15px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background 0.2s;
      user-select: none;
    }

    .group-header:hover {
      background: var(--bg-hover);
    }

    .group-icon {
      font-size: 14px;
      transition: transform 0.2s;
    }

    .group-header.collapsed .group-icon {
      transform: rotate(-90deg);
    }

    .group-name {
      flex: 1;
      font-size: 14px;
      color: var(--text-primary);
    }

    .group-count {
      font-size: 11px;
      color: var(--text-secondary);
      background: var(--bg-tertiary);
      padding: 2px 6px;
      border-radius: 10px;
    }

    .group-apis {
      display: none;
      padding-left: 25px;
    }

    .group-apis.expanded {
      display: block;
    }

    .api-item {
      padding: 6px 15px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: var(--text-secondary);
      transition: all 0.2s;
      border-left: 2px solid transparent;
    }

    .api-item:hover {
      background: var(--bg-hover);
      color: var(--text-primary);
    }

    .api-item.active {
      background: var(--bg-tertiary);
      color: var(--accent-light);
      border-left-color: var(--accent-blue);
    }

    .api-method {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 3px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .api-method.post {
      background: #4caf5020;
      color: #4caf50;
    }

    .api-method.get {
      background: #2196f320;
      color: #2196f3;
    }

    .api-method.put {
      background: #ff980020;
      color: #ff9800;
    }

    .api-method.delete {
      background: #f4433620;
      color: #f44336;
    }

    /* ===== å³ä¾§ä¸»é¢æ¿ ===== */
    .main-panel {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      background: var(--bg-primary);
    }

    /* ===== æ¬¢è¿é¡µ ===== */
    .welcome-screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      text-align: center;
      padding: 40px;
    }

    .welcome-icon {
      font-size: 80px;
      margin-bottom: 20px;
      opacity: 0.3;
    }

    .welcome-title {
      font-size: 24px;
      margin-bottom: 10px;
      color: var(--text-primary);
    }

    .welcome-subtitle {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 30px;
    }

    /* ===== APIè¯¦æƒ…é¢æ¿ ===== */
    .detail-panel {
      display: none;
      flex-direction: column;
      height: 100%;
    }

    .detail-panel.active {
      display: flex;
    }

    .detail-header {
      padding: 20px;
      border-bottom: 1px solid var(--border-color);
      background: var(--bg-secondary);
    }

    .detail-title {
      font-size: 18px;
      margin-bottom: 5px;
      color: var(--text-primary);
    }

    .detail-path {
      font-size: 13px;
      color: var(--accent-light);
      font-family: 'Consolas', monospace;
    }

    .detail-tabs {
      display: flex;
      gap: 2px;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-color);
    }

    .detail-tab {
      padding: 10px 20px;
      background: transparent;
      border: none;
      color: var(--text-secondary);
      cursor: pointer;
      font-size: 13px;
      transition: all 0.2s;
      border-bottom: 2px solid transparent;
    }

    .detail-tab:hover {
      color: var(--text-primary);
      background: var(--bg-hover);
    }

    .detail-tab.active {
      color: var(--accent-light);
      border-bottom-color: var(--accent-blue);
      background: var(--bg-primary);
    }

    .detail-content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }

    .tab-pane {
      display: none;
    }

    .tab-pane.active {
      display: block;
    }

    /* ===== è¡¨å•æ ·å¼ ===== */
    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-size: 13px;
      color: var(--text-secondary);
    }

    .form-input,
    .form-select,
    .form-textarea {
      width: 100%;
      padding: 10px 12px;
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 4px;
      color: var(--text-primary);
      font-size: 13px;
      font-family: 'Consolas', monospace;
      transition: border-color 0.2s;
    }

    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
      outline: none;
      border-color: var(--accent-blue);
    }

    .form-textarea {
      min-height: 100px;
      font-family: 'Consolas', 'Monaco', monospace;
      resize: vertical;
    }

    /* ===== æŒ‰é’®æ ·å¼ ===== */
    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn-primary {
      background: var(--accent-blue);
      color: white;
    }

    .btn-primary:hover {
      background: #005a9e;
    }

    .btn-success {
      background: var(--accent-success);
      color: white;
    }

    .btn-success:hover {
      background: #45a049;
    }

    .btn-danger {
      background: var(--accent-danger);
      color: white;
    }

    .btn-danger:hover {
      background: #d32f2f;
    }

    .btn-secondary {
      background: var(--bg-tertiary);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
    }

    .btn-secondary:hover {
      background: var(--bg-hover);
    }

    .btn-group {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    /* ===== æ»šåŠ¨æ¡æ ·å¼ ===== */
    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-primary);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--bg-tertiary);
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--border-color);
    }

    /* ===== ä»£ç å—æ ·å¼ ===== */
    .code-block {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 4px;
      padding: 15px;
      font-family: 'Consolas', monospace;
      font-size: 12px;
      overflow-x: auto;
      margin: 10px 0;
    }

    /* ===== åŠ è½½åŠ¨ç”» ===== */
    .loading {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid var(--border-color);
      border-top-color: var(--accent-blue);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ===== æœç´¢æ¡† ===== */
    .search-box {
      margin: 10px 15px;
      position: relative;
    }

    .search-input {
      width: 100%;
      padding: 8px 12px 8px 35px;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 4px;
      color: var(--text-primary);
      font-size: 13px;
    }

    .search-input:focus {
      outline: none;
      border-color: var(--accent-blue);
    }

    .search-icon {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-secondary);
      font-size: 14px;
    }
  </style>
</head>
<body>
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <div class="header">
    <div class="header-left">
      <div class="logo">
        <span>ğŸ”§</span>
        <span>API ç®¡ç†ç³»ç»Ÿ</span>
      </div>
      <div class="header-stats">
        <div class="stat-item">
          <span>æ€»æ¥å£æ•°:</span>
          <span class="stat-value" id="totalApis">0</span>
        </div>
        <div class="stat-item">
          <span>åˆ†ç»„æ•°:</span>
          <span class="stat-value" id="totalGroups">0</span>
        </div>
        <div class="stat-item">
          <span>æ•°æ®æº:</span>
          <span class="stat-value" id="totalDatasources">0</span>
        </div>
      </div>
    </div>
    <div class="header-actions">
      <button class="btn btn-primary" onclick="createNewAPI()">+ åˆ›å»ºAPI</button>
      <button class="btn btn-secondary" onclick="manageDatasources()">æ•°æ®æº</button>
      <button class="btn btn-secondary" onclick="manageGroups()">åˆ†ç»„</button>
      <button class="btn btn-secondary" onclick="refreshData()">åˆ·æ–°</button>
    </div>
  </div>

  <!-- ä¸»ä½“å®¹å™¨ -->
  <div class="main-container">
    <!-- å·¦ä¾§è¾¹æ  -->
    <div class="sidebar">
      <div class="sidebar-header">
        <span class="sidebar-title">API Explorer</span>
        <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 11px;" onclick="toggleAllGroups()">å…¨éƒ¨æŠ˜å </button>
      </div>

      <!-- æœç´¢æ¡† -->
      <div class="search-box">
        <span class="search-icon">ğŸ”</span>
        <input type="text" class="search-input" placeholder="æœç´¢API..." id="searchInput" oninput="filterAPIs()">
      </div>

      <!-- æ ‘å½¢èœå• -->
      <div class="sidebar-content" id="apiTree">
        <!-- åŠ¨æ€åŠ è½½åˆ†ç»„å’ŒAPI -->
      </div>
    </div>

    <!-- å³ä¾§ä¸»é¢æ¿ -->
    <div class="main-panel">
      <!-- æ¬¢è¿å±å¹• -->
      <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-icon">ğŸ‘‹</div>
        <h2 class="welcome-title">æ¬¢è¿ä½¿ç”¨ API ç®¡ç†ç³»ç»Ÿ</h2>
        <p class="welcome-subtitle">ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªAPIå¼€å§‹ç¼–è¾‘ï¼Œæˆ–åˆ›å»ºæ–°çš„API</p>
        <div class="btn-group">
          <button class="btn btn-primary" onclick="createNewAPI()">åˆ›å»ºæ–°API</button>
          <button class="btn btn-secondary" onclick="loadAPIs()">åˆ·æ–°åˆ—è¡¨</button>
        </div>
      </div>

      <!-- APIè¯¦æƒ…é¢æ¿ -->
      <div class="detail-panel" id="detailPanel">
        <div class="detail-header">
          <h2 class="detail-title" id="detailTitle">APIåç§°</h2>
          <p class="detail-path" id="detailPath">/api/path</p>
        </div>

        <div class="detail-tabs">
          <button class="detail-tab active" onclick="switchTab('basic')">åŸºæœ¬ä¿¡æ¯</button>
          <button class="detail-tab" onclick="switchTab('sql')">SQLé…ç½®</button>
          <button class="detail-tab" onclick="switchTab('params')">å‚æ•°</button>
          <button class="detail-tab" onclick="switchTab('test')">æµ‹è¯•</button>
        </div>

        <div class="detail-content">
          <!-- åŸºæœ¬ä¿¡æ¯ Tab -->
          <div class="tab-pane active" id="tab-basic">
            <div class="form-group">
              <label class="form-label">APIåç§°</label>
              <input type="text" class="form-input" id="apiName" placeholder="è¾“å…¥APIåç§°">
            </div>
            <div class="form-group">
              <label class="form-label">è¯·æ±‚è·¯å¾„</label>
              <input type="text" class="form-input" id="apiPath" placeholder="/api/your-endpoint">
            </div>
            <div class="form-group">
              <label class="form-label">è¯´æ˜</label>
              <textarea class="form-textarea" id="apiNote" placeholder="APIè¯´æ˜"></textarea>
            </div>
            <div class="form-group">
              <label class="form-label">æ‰€å±åˆ†ç»„</label>
              <select class="form-select" id="apiGroup">
                <option value="">æ— åˆ†ç»„</option>
              </select>
            </div>
            <div class="btn-group">
              <button class="btn btn-success" onclick="saveAPI()">ä¿å­˜</button>
              <button class="btn btn-danger" onclick="deleteAPI()">åˆ é™¤</button>
              <button class="btn btn-secondary" onclick="closeDetail()">å…³é—­</button>
            </div>
          </div>

          <!-- SQLé…ç½® Tab -->
          <div class="tab-pane" id="tab-sql">
            <div class="form-group">
              <label class="form-label">æ•°æ®æº</label>
              <select class="form-select" id="apiDatasource">
                <option value="">é€‰æ‹©æ•°æ®æº</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">SQLè¯­å¥</label>
              <textarea class="form-textarea" id="apiSQL" placeholder="SELECT * FROM table WHERE id = #{id}" style="min-height: 300px;"></textarea>
            </div>
          </div>

          <!-- å‚æ•° Tab -->
          <div class="tab-pane" id="tab-params">
            <div class="form-group">
              <label class="form-label">å‚æ•°åˆ—è¡¨</label>
              <div class="code-block">å‚æ•°é…ç½®å¼€å‘ä¸­...</div>
            </div>
          </div>

          <!-- æµ‹è¯• Tab -->
          <div class="tab-pane" id="tab-test">
            <div class="form-group">
              <label class="form-label">æµ‹è¯•å‚æ•°ï¼ˆJSONï¼‰</label>
              <textarea class="form-textarea" id="testParams" placeholder='{"id": 1}' style="min-height: 150px;"></textarea>
            </div>
            <button class="btn btn-primary" onclick="testAPI()">æ‰§è¡Œæµ‹è¯•</button>
            <div class="form-group" style="margin-top: 20px;">
              <label class="form-label">æµ‹è¯•ç»“æœ</label>
              <div class="code-block" id="testResult" style="min-height: 200px;">ç‚¹å‡»"æ‰§è¡Œæµ‹è¯•"æŸ¥çœ‹ç»“æœ</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œè‡ªåŠ¨é€‚é…å½“å‰åŸŸåå’Œåè®®
    const API_BASE = window.location.origin;
    let allApis = [];
    let groups = [];
    let datasources = [];
    let currentAPI = null;

    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    window.addEventListener('DOMContentLoaded', () => {
      loadAPIs();
      loadGroups();
      loadDatasources();
    });

    // åŠ è½½æ‰€æœ‰API
    async function loadAPIs() {
      try {
        const response = await fetch(`${API_BASE}/admin/apis`);
        const data = await response.json();

        if (data.success) {
          allApis = data.apis || [];
          updateStats();
          renderAPITree();
        } else {
          console.error('åŠ è½½APIå¤±è´¥:', data.message);
        }
      } catch (error) {
        console.error('åŠ è½½APIå¤±è´¥:', error);
      }
    }

    // åŠ è½½åˆ†ç»„
    async function loadGroups() {
      try {
        const response = await fetch(`${API_BASE}/admin/groups`);
        const data = await response.json();

        if (data.success) {
          groups = data.groups || [];
          updateStats();
          renderAPITree();
        }
      } catch (error) {
        console.error('åŠ è½½åˆ†ç»„å¤±è´¥:', error);
      }
    }

    // åŠ è½½æ•°æ®æº
    async function loadDatasources() {
      try {
        const response = await fetch(`${API_BASE}/admin/datasources`);
        const data = await response.json();

        if (data.success) {
          datasources = data.data || [];
          updateStats();
        }
      } catch (error) {
        console.error('åŠ è½½æ•°æ®æºå¤±è´¥:', error);
      }
    }

    // æ›´æ–°ç»Ÿè®¡æ•°å­—
    function updateStats() {
      document.getElementById('totalApis').textContent = allApis.length;
      document.getElementById('totalGroups').textContent = groups.length;
      document.getElementById('totalDatasources').textContent = datasources.length;
    }

    // æ¸²æŸ“APIæ ‘
    function renderAPITree() {
      const treeContainer = document.getElementById('apiTree');

      // æŒ‰åˆ†ç»„åˆ†ç±»API
      const groupedAPIs = {};
      const ungroupedAPIs = [];

      allApis.forEach(api => {
        if (api.groupId) {
          if (!groupedAPIs[api.groupId]) {
            groupedAPIs[api.groupId] = [];
          }
          groupedAPIs[api.groupId].push(api);
        } else {
          ungroupedAPIs.push(api);
        }
      });

      let html = '';

      // æ¸²æŸ“åˆ†ç»„
      groups.forEach(group => {
        const groupAPIs = groupedAPIs[group.id] || [];
        html += `
          <div class="tree-group">
            <div class="group-header" onclick="toggleGroup('${group.id}')">
              <span class="group-icon">â–¼</span>
              <span class="group-name">ğŸ“ ${group.name}</span>
              <span class="group-count">${groupAPIs.length}</span>
            </div>
            <div class="group-apis expanded" id="group-${group.id}">
              ${groupAPIs.map(api => renderAPIItem(api)).join('')}
            </div>
          </div>
        `;
      });

      // æ¸²æŸ“æœªåˆ†ç»„çš„API
      if (ungroupedAPIs.length > 0) {
        html += `
          <div class="tree-group">
            <div class="group-header" onclick="toggleGroup('ungrouped')">
              <span class="group-icon">â–¼</span>
              <span class="group-name">ğŸ“‚ æœªåˆ†ç»„</span>
              <span class="group-count">${ungroupedAPIs.length}</span>
            </div>
            <div class="group-apis expanded" id="group-ungrouped">
              ${ungroupedAPIs.map(api => renderAPIItem(api)).join('')}
            </div>
          </div>
        `;
      }

      treeContainer.innerHTML = html || '<div style="padding: 20px; text-align: center; color: var(--text-secondary);">æš‚æ— API</div>';
    }

    // æ¸²æŸ“å•ä¸ªAPIé¡¹
    function renderAPIItem(api) {
      const method = (api.contentType || 'POST').toUpperCase();
      return `
        <div class="api-item" onclick="selectAPI('${api.id}')">
          <span class="api-method ${method.toLowerCase()}">${method}</span>
          <span>${api.name}</span>
        </div>
      `;
    }

    // åˆ‡æ¢åˆ†ç»„å±•å¼€/æŠ˜å 
    function toggleGroup(groupId) {
      const groupElement = document.getElementById(`group-${groupId}`);
      const header = groupElement.previousElementSibling;

      if (groupElement.classList.contains('expanded')) {
        groupElement.classList.remove('expanded');
        header.classList.add('collapsed');
      } else {
        groupElement.classList.add('expanded');
        header.classList.remove('collapsed');
      }
    }

    // å…¨éƒ¨æŠ˜å /å±•å¼€
    function toggleAllGroups() {
      const allGroups = document.querySelectorAll('.group-apis');
      const isExpanded = Array.from(allGroups).some(g => g.classList.contains('expanded'));

      allGroups.forEach(group => {
        if (isExpanded) {
          group.classList.remove('expanded');
          group.previousElementSibling.classList.add('collapsed');
        } else {
          group.classList.add('expanded');
          group.previousElementSibling.classList.remove('collapsed');
        }
      });
    }

    // é€‰æ‹©API
    function selectAPI(apiId) {
      currentAPI = allApis.find(api => api.id === apiId);

      if (!currentAPI) return;

      // æ›´æ–°é€‰ä¸­çŠ¶æ€
      document.querySelectorAll('.api-item').forEach(item => {
        item.classList.remove('active');
      });
      event.currentTarget.classList.add('active');

      // æ˜¾ç¤ºè¯¦æƒ…é¢æ¿
      document.getElementById('welcomeScreen').style.display = 'none';
      document.getElementById('detailPanel').classList.add('active');

      // å¡«å……è¡¨å•
      document.getElementById('detailTitle').textContent = currentAPI.name;
      document.getElementById('detailPath').textContent = currentAPI.path;
      document.getElementById('apiName').value = currentAPI.name || '';
      document.getElementById('apiPath').value = currentAPI.path || '';
      document.getElementById('apiNote').value = currentAPI.note || '';
      document.getElementById('apiGroup').value = currentAPI.groupId || '';

      // SQLé…ç½®
      if (currentAPI.sqlConfig) {
        document.getElementById('apiDatasource').value = currentAPI.datasourceId || '';
        document.getElementById('apiSQL').value = currentAPI.sqlList?.[0] || '';
      }
    }

    // åˆ‡æ¢Tab
    function switchTab(tabName) {
      // æ›´æ–°TabæŒ‰é’®çŠ¶æ€
      document.querySelectorAll('.detail-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      event.currentTarget.classList.add('active');

      // æ›´æ–°Tabå†…å®¹
      document.querySelectorAll('.tab-pane').forEach(pane => {
        pane.classList.remove('active');
      });
      document.getElementById(`tab-${tabName}`).classList.add('active');
    }

    // åˆ›å»ºæ–°API
    function createNewAPI() {
      alert('åˆ›å»ºAPIåŠŸèƒ½å¼€å‘ä¸­...');
    }

    // ä¿å­˜API
    function saveAPI() {
      alert('ä¿å­˜APIåŠŸèƒ½å¼€å‘ä¸­...');
    }

    // åˆ é™¤API
    function deleteAPI() {
      if (confirm('ç¡®å®šè¦åˆ é™¤æ­¤APIå—ï¼Ÿ')) {
        alert('åˆ é™¤APIåŠŸèƒ½å¼€å‘ä¸­...');
      }
    }

    // å…³é—­è¯¦æƒ…é¢æ¿
    function closeDetail() {
      document.getElementById('detailPanel').classList.remove('active');
      document.getElementById('welcomeScreen').style.display = 'flex';
      document.querySelectorAll('.api-item').forEach(item => {
        item.classList.remove('active');
      });
    }

    // æµ‹è¯•API
    function testAPI() {
      alert('æµ‹è¯•APIåŠŸèƒ½å¼€å‘ä¸­...');
    }

    // ç®¡ç†æ•°æ®æº
    function manageDatasources() {
      alert('æ•°æ®æºç®¡ç†åŠŸèƒ½å¼€å‘ä¸­...');
    }

    // ç®¡ç†åˆ†ç»„
    function manageGroups() {
      alert('åˆ†ç»„ç®¡ç†åŠŸèƒ½å¼€å‘ä¸­...');
    }

    // åˆ·æ–°æ•°æ®
    function refreshData() {
      loadAPIs();
      loadGroups();
      loadDatasources();
    }

    // è¿‡æ»¤API
    function filterAPIs() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      // TODO: å®ç°æœç´¢è¿‡æ»¤åŠŸèƒ½
    }
  </script>
</body>
</html>
