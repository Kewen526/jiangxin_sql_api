<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API ç®¡ç†ç³»ç»Ÿ - Jiangxin SQL API</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
      background: #f5f7fa;
      overflow: hidden;
    }

    /* é¡¶éƒ¨å¯¼èˆªæ  */
    .header {
      height: 60px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .header-left h1 {
      font-size: 20px;
      font-weight: 600;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s;
    }

    .btn-primary {
      background: rgba(255,255,255,0.2);
      color: white;
      border: 1px solid rgba(255,255,255,0.3);
    }

    .btn-primary:hover {
      background: rgba(255,255,255,0.3);
    }

    /* ä¸»å®¹å™¨ */
    .main-container {
      display: flex;
      height: calc(100vh - 60px);
    }

    /* å·¦ä¾§è¾¹æ  */
    .sidebar {
      width: 300px;
      background: white;
      border-right: 1px solid #e0e0e0;
      display: flex;
      flex-direction: column;
    }

    .sidebar-header {
      padding: 20px;
      border-bottom: 1px solid #e0e0e0;
    }

    .search-box {
      width: 100%;
      padding: 10px;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      font-size: 14px;
    }

    .search-box:focus {
      outline: none;
      border-color: #667eea;
    }

    .sidebar-nav {
      flex: 1;
      overflow-y: auto;
      padding: 10px;
    }

    .nav-item {
      padding: 12px 15px;
      margin-bottom: 5px;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 14px;
      transition: all 0.2s;
    }

    .nav-item:hover {
      background: #f5f7fa;
    }

    .nav-item.active {
      background: #667eea;
      color: white;
    }

    .tree-container {
      flex: 1;
      overflow-y: auto;
    }

    .tree-group {
      margin-bottom: 10px;
    }

    .tree-group-header {
      padding: 10px 15px;
      background: #f8f9fa;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 500;
      font-size: 14px;
    }

    .tree-group-header:hover {
      background: #e9ecef;
    }

    .tree-group-header .icon {
      transition: transform 0.2s;
    }

    .tree-group-header.collapsed .icon {
      transform: rotate(-90deg);
    }

    .tree-items {
      padding-left: 15px;
      margin-top: 5px;
    }

    .tree-items.hidden {
      display: none;
    }

    .tree-item {
      padding: 8px 15px;
      border-left: 2px solid transparent;
      cursor: pointer;
      font-size: 13px;
      color: #666;
      transition: all 0.2s;
    }

    .tree-item:hover {
      background: #f8f9fa;
      border-left-color: #667eea;
      color: #333;
    }

    .tree-item.active {
      background: #e7f0ff;
      border-left-color: #667eea;
      color: #667eea;
      font-weight: 500;
    }

    .sidebar-footer {
      padding: 15px;
      border-top: 1px solid #e0e0e0;
      display: flex;
      gap: 10px;
    }

    .btn-block {
      flex: 1;
      padding: 10px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }

    .btn-block:hover {
      background: #5568d3;
    }

    /* å³ä¾§å†…å®¹åŒº */
    .content {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .content-header {
      padding: 20px 30px;
      background: white;
      border-bottom: 1px solid #e0e0e0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .content-header h2 {
      font-size: 18px;
      color: #333;
    }

    .content-actions {
      display: flex;
      gap: 10px;
    }

    .content-body {
      flex: 1;
      padding: 30px;
      overflow-y: auto;
      background: #f5f7fa;
    }

    .panel {
      background: white;
      border-radius: 8px;
      padding: 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      font-size: 14px;
      color: #333;
    }

    .form-control {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      font-size: 14px;
    }

    .form-control:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    textarea.form-control {
      min-height: 100px;
      resize: vertical;
    }

    .btn-save {
      background: #667eea;
      color: white;
      padding: 10px 24px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }

    .btn-save:hover {
      background: #5568d3;
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
      padding: 10px 24px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }

    .btn-secondary:hover {
      background: #5a6268;
    }

    .btn-danger {
      background: #dc3545;
      color: white;
      padding: 10px 24px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }

    .btn-danger:hover {
      background: #c82333;
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #999;
    }

    .empty-state .icon {
      font-size: 48px;
      margin-bottom: 20px;
    }

    .hidden {
      display: none !important;
    }

    .alert {
      padding: 12px 16px;
      border-radius: 4px;
      margin-bottom: 20px;
      font-size: 14px;
    }

    .alert-success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .alert-error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    .table th,
    .table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #e0e0e0;
      font-size: 14px;
    }

    .table th {
      background: #f8f9fa;
      font-weight: 500;
      color: #666;
    }

    .table tbody tr:hover {
      background: #f8f9fa;
    }

    .badge {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 3px;
      font-size: 12px;
      font-weight: 500;
    }

    .badge-success {
      background: #d4edda;
      color: #155724;
    }

    .badge-danger {
      background: #f8d7da;
      color: #721c24;
    }
  </style>
</head>
<body>
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <div class="header">
    <div class="header-left">
      <h1>ğŸ› ï¸ API ç®¡ç†ç³»ç»Ÿ</h1>
      <span id="tenantName" style="opacity: 0.9; font-size: 14px;"></span>
    </div>
    <div class="header-right">
      <div class="user-info">
        <span id="userEmail"></span>
        <button class="btn btn-primary" onclick="logout()">é€€å‡ºç™»å½•</button>
      </div>
    </div>
  </div>

  <!-- ä¸»å®¹å™¨ -->
  <div class="main-container">
    <!-- å·¦ä¾§è¾¹æ  -->
    <div class="sidebar">
      <div class="sidebar-header">
        <input type="text" class="search-box" id="searchBox" placeholder="æœç´¢ API...">
      </div>

      <div class="sidebar-nav">
        <div class="nav-item active" data-view="apis">
          ğŸ“‹ API åˆ—è¡¨
        </div>
        <div class="nav-item" data-view="datasources">
          ğŸ—„ï¸ æ•°æ®æº
        </div>
        <div class="nav-item" data-view="groups">
          ğŸ“ åˆ†ç»„ç®¡ç†
        </div>
      </div>

      <div class="tree-container hidden" id="treeContainer">
        <!-- åŠ¨æ€ç”Ÿæˆçš„æ ‘å½¢ç»“æ„ -->
      </div>

      <div class="sidebar-footer">
        <button class="btn-block" onclick="createNew()">+ æ–°å»º</button>
      </div>
    </div>

    <!-- å³ä¾§å†…å®¹åŒº -->
    <div class="content">
      <div class="content-header">
        <h2 id="contentTitle">æ¬¢è¿ä½¿ç”¨</h2>
        <div class="content-actions" id="contentActions">
          <!-- åŠ¨æ€ç”Ÿæˆçš„æ“ä½œæŒ‰é’® -->
        </div>
      </div>

      <div class="content-body" id="contentBody">
        <div class="empty-state">
          <div class="icon">ğŸ“¦</div>
          <p>é€‰æ‹©å·¦ä¾§èœå•å¼€å§‹ç®¡ç†</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // é…ç½®
    const API_BASE = window.location.origin;
    let currentView = 'apis';
    let currentItem = null;
    let authToken = localStorage.getItem('auth_token');
    let userInfo = null;

    // æ£€æŸ¥ç™»å½•çŠ¶æ€
    async function checkAuth() {
      if (!authToken) {
        window.location.href = 'login.html';
        return false;
      }

      try {
        const response = await fetch(`${API_BASE}/api/auth/me`, {
          headers: {
            'Authorization': `Bearer ${authToken}`
          }
        });

        if (!response.ok) {
          throw new Error('è®¤è¯å¤±è´¥');
        }

        const result = await response.json();
        userInfo = result.data;

        // æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯
        document.getElementById('userEmail').textContent = userInfo.email;
        document.getElementById('tenantName').textContent = userInfo.tenant.name;

        return true;
      } catch (error) {
        console.error('è®¤è¯æ£€æŸ¥å¤±è´¥:', error);
        localStorage.removeItem('auth_token');
        window.location.href = 'login.html';
        return false;
      }
    }

    // é€€å‡ºç™»å½•
    function logout() {
      localStorage.removeItem('auth_token');
      localStorage.removeItem('user_info');
      window.location.href = 'login.html';
    }

    // HTTP è¯·æ±‚å°è£…
    async function apiRequest(url, options = {}) {
      const defaultOptions = {
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${authToken}`
        }
      };

      const response = await fetch(`${API_BASE}${url}`, {
        ...defaultOptions,
        ...options,
        headers: {
          ...defaultOptions.headers,
          ...options.headers
        }
      });

      const result = await response.json();

      if (!result.success) {
        throw new Error(result.message || 'æ“ä½œå¤±è´¥');
      }

      return result.data;
    }

    // åˆ‡æ¢è§†å›¾
    function switchView(view) {
      currentView = view;
      currentItem = null;

      // æ›´æ–°å¯¼èˆª
      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.toggle('active', item.dataset.view === view);
      });

      // åŠ è½½å¯¹åº”è§†å›¾
      if (view === 'apis') {
        loadAPIs();
      } else if (view === 'datasources') {
        loadDatasources();
      } else if (view === 'groups') {
        loadGroups();
      }
    }

    // åŠ è½½ API åˆ—è¡¨
    async function loadAPIs() {
      try {
        const apis = await apiRequest('/api/apis');
        const groups = await apiRequest('/api/groups');

        // æ„å»ºæ ‘å½¢ç»“æ„
        const treeContainer = document.getElementById('treeContainer');
        treeContainer.classList.remove('hidden');
        treeContainer.innerHTML = '';

        // æŒ‰åˆ†ç»„ç»„ç»‡ API
        const groupedAPIs = {};
        groups.forEach(group => {
          groupedAPIs[group.id] = {
            ...group,
            apis: []
          };
        });

        // æœªåˆ†ç»„çš„ API
        groupedAPIs['_ungrouped'] = {
          id: null,
          name: 'æœªåˆ†ç»„',
          apis: []
        };

        apis.forEach(api => {
          const groupId = api.group_id || '_ungrouped';
          if (groupedAPIs[groupId]) {
            groupedAPIs[groupId].apis.push(api);
          }
        });

        // æ¸²æŸ“æ ‘å½¢ç»“æ„
        Object.values(groupedAPIs).forEach(group => {
          if (group.apis.length === 0 && group.id !== null) return;

          const groupDiv = document.createElement('div');
          groupDiv.className = 'tree-group';
          groupDiv.innerHTML = `
            <div class="tree-group-header" onclick="toggleGroup(this)">
              <span class="icon">â–¼</span>
              <span>${group.name} (${group.apis.length})</span>
            </div>
            <div class="tree-items">
              ${group.apis.map(api => `
                <div class="tree-item" onclick="selectAPI('${api.id}')">
                  ${api.name}
                </div>
              `).join('')}
            </div>
          `;
          treeContainer.appendChild(groupDiv);
        });

        // æ˜¾ç¤ºç»Ÿè®¡
        document.getElementById('contentTitle').textContent = `API åˆ—è¡¨ (${apis.length})`;
        document.getElementById('contentActions').innerHTML = '';

        // æ˜¾ç¤ºåˆ—è¡¨è§†å›¾
        showAPIList(apis);

      } catch (error) {
        console.error('åŠ è½½ API å¤±è´¥:', error);
        showError(error.message);
      }
    }

    // æ˜¾ç¤º API åˆ—è¡¨
    function showAPIList(apis) {
      const contentBody = document.getElementById('contentBody');

      if (apis.length === 0) {
        contentBody.innerHTML = `
          <div class="empty-state">
            <div class="icon">ğŸ“‹</div>
            <p>è¿˜æ²¡æœ‰ APIï¼Œç‚¹å‡»ä¸‹æ–¹"æ–°å»º"æŒ‰é’®åˆ›å»ºç¬¬ä¸€ä¸ªAPI</p>
          </div>
        `;
        return;
      }

      contentBody.innerHTML = `
        <div class="panel">
          <table class="table">
            <thead>
              <tr>
                <th>åç§°</th>
                <th>è·¯å¾„</th>
                <th>åˆ†ç»„</th>
                <th>çŠ¶æ€</th>
                <th>åˆ›å»ºæ—¶é—´</th>
                <th>æ“ä½œ</th>
              </tr>
            </thead>
            <tbody>
              ${apis.map(api => `
                <tr>
                  <td>${api.name}</td>
                  <td><code>${api.path}</code></td>
                  <td>${api.group_name || 'æœªåˆ†ç»„'}</td>
                  <td><span class="badge ${api.status ? 'badge-success' : 'badge-danger'}">${api.status ? 'å¯ç”¨' : 'ç¦ç”¨'}</span></td>
                  <td>${new Date(api.created_at).toLocaleString()}</td>
                  <td>
                    <button onclick="selectAPI('${api.id}')" class="btn btn-primary">ç¼–è¾‘</button>
                  </td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        </div>
      `;
    }

    // é€‰æ‹© API
    async function selectAPI(id) {
      try {
        const api = await apiRequest(`/api/apis/${id}`);
        currentItem = api;

        document.getElementById('contentTitle').textContent = `ç¼–è¾‘ API: ${api.name}`;
        document.getElementById('contentActions').innerHTML = `
          <button class="btn-danger" onclick="deleteAPI('${id}')">åˆ é™¤</button>
          <button class="btn-save" onclick="saveAPI('${id}')">ä¿å­˜</button>
        `;

        document.getElementById('contentBody').innerHTML = `
          <div class="panel">
            <div class="form-group">
              <label>API åç§°</label>
              <input type="text" class="form-control" id="apiName" value="${api.name}">
            </div>
            <div class="form-group">
              <label>è¯·æ±‚è·¯å¾„</label>
              <input type="text" class="form-control" id="apiPath" value="${api.path}">
            </div>
            <div class="form-group">
              <label>è¯´æ˜</label>
              <textarea class="form-control" id="apiNote">${api.note || ''}</textarea>
            </div>
            <div class="form-group">
              <label>SQL é…ç½®ï¼ˆJSONï¼‰</label>
              <textarea class="form-control" id="apiSqlConfig" style="min-height: 200px; font-family: monospace;">${JSON.stringify(api.sql_config, null, 2)}</textarea>
            </div>
          </div>
        `;

        // é«˜äº®é€‰ä¸­çš„æ ‘èŠ‚ç‚¹
        document.querySelectorAll('.tree-item').forEach(item => {
          item.classList.remove('active');
        });
        event.target.classList.add('active');

      } catch (error) {
        console.error('åŠ è½½ API è¯¦æƒ…å¤±è´¥:', error);
        showError(error.message);
      }
    }

    // ä¿å­˜ API
    async function saveAPI(id) {
      try {
        const data = {
          name: document.getElementById('apiName').value,
          path: document.getElementById('apiPath').value,
          note: document.getElementById('apiNote').value,
          sql_config: JSON.parse(document.getElementById('apiSqlConfig').value)
        };

        await apiRequest(`/api/apis/${id}`, {
          method: 'PUT',
          body: JSON.stringify(data)
        });

        showSuccess('ä¿å­˜æˆåŠŸ');
        loadAPIs();

      } catch (error) {
        console.error('ä¿å­˜å¤±è´¥:', error);
        showError(error.message);
      }
    }

    // åˆ é™¤ API
    async function deleteAPI(id) {
      if (!confirm('ç¡®è®¤åˆ é™¤æ­¤ API å—ï¼Ÿ')) return;

      try {
        await apiRequest(`/api/apis/${id}`, {
          method: 'DELETE'
        });

        showSuccess('åˆ é™¤æˆåŠŸ');
        loadAPIs();

      } catch (error) {
        console.error('åˆ é™¤å¤±è´¥:', error);
        showError(error.message);
      }
    }

    // åŠ è½½æ•°æ®æºåˆ—è¡¨
    async function loadDatasources() {
      try {
        const datasources = await apiRequest('/api/datasources');

        document.getElementById('treeContainer').classList.add('hidden');
        document.getElementById('contentTitle').textContent = `æ•°æ®æºç®¡ç† (${datasources.length})`;
        document.getElementById('contentActions').innerHTML = '';

        const contentBody = document.getElementById('contentBody');

        if (datasources.length === 0) {
          contentBody.innerHTML = `
            <div class="empty-state">
              <div class="icon">ğŸ—„ï¸</div>
              <p>è¿˜æ²¡æœ‰æ•°æ®æºï¼Œç‚¹å‡»ä¸‹æ–¹"æ–°å»º"æŒ‰é’®æ·»åŠ æ•°æ®æº</p>
            </div>
          `;
          return;
        }

        contentBody.innerHTML = `
          <div class="panel">
            <table class="table">
              <thead>
                <tr>
                  <th>åç§°</th>
                  <th>ä¸»æœº</th>
                  <th>ç«¯å£</th>
                  <th>æ•°æ®åº“</th>
                  <th>çŠ¶æ€</th>
                  <th>æ“ä½œ</th>
                </tr>
              </thead>
              <tbody>
                ${datasources.map(ds => `
                  <tr>
                    <td>${ds.name}</td>
                    <td>${ds.host}</td>
                    <td>${ds.port}</td>
                    <td>${ds.database_name}</td>
                    <td><span class="badge ${ds.status ? 'badge-success' : 'badge-danger'}">${ds.status ? 'è¿æ¥æ­£å¸¸' : 'å·²ç¦ç”¨'}</span></td>
                    <td>
                      <button onclick="editDatasource('${ds.id}')" class="btn btn-primary">ç¼–è¾‘</button>
                      <button onclick="deleteDatasource('${ds.id}')" class="btn btn-danger">åˆ é™¤</button>
                    </td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
          </div>
        `;

      } catch (error) {
        console.error('åŠ è½½æ•°æ®æºå¤±è´¥:', error);
        showError(error.message);
      }
    }

    // åŠ è½½åˆ†ç»„åˆ—è¡¨
    async function loadGroups() {
      try {
        const groups = await apiRequest('/api/groups');

        document.getElementById('treeContainer').classList.add('hidden');
        document.getElementById('contentTitle').textContent = `åˆ†ç»„ç®¡ç† (${groups.length})`;
        document.getElementById('contentActions').innerHTML = '';

        const contentBody = document.getElementById('contentBody');

        if (groups.length === 0) {
          contentBody.innerHTML = `
            <div class="empty-state">
              <div class="icon">ğŸ“</div>
              <p>è¿˜æ²¡æœ‰åˆ†ç»„ï¼Œç‚¹å‡»ä¸‹æ–¹"æ–°å»º"æŒ‰é’®åˆ›å»ºåˆ†ç»„</p>
            </div>
          `;
          return;
        }

        contentBody.innerHTML = `
          <div class="panel">
            <table class="table">
              <thead>
                <tr>
                  <th>åç§°</th>
                  <th>è¯´æ˜</th>
                  <th>API æ•°é‡</th>
                  <th>æ’åº</th>
                  <th>æ“ä½œ</th>
                </tr>
              </thead>
              <tbody>
                ${groups.map(group => `
                  <tr>
                    <td>${group.name}</td>
                    <td>${group.description || '-'}</td>
                    <td>${group.api_count}</td>
                    <td>${group.sort_order}</td>
                    <td>
                      <button onclick="editGroup('${group.id}')" class="btn btn-primary">ç¼–è¾‘</button>
                      <button onclick="deleteGroup('${group.id}')" class="btn btn-danger">åˆ é™¤</button>
                    </td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
          </div>
        `;

      } catch (error) {
        console.error('åŠ è½½åˆ†ç»„å¤±è´¥:', error);
        showError(error.message);
      }
    }

    // æŠ˜å /å±•å¼€åˆ†ç»„
    function toggleGroup(header) {
      const items = header.nextElementSibling;
      items.classList.toggle('hidden');
      header.classList.toggle('collapsed');
    }

    // æ–°å»º
    function createNew() {
      // æ ¹æ®å½“å‰è§†å›¾åˆ›å»ºä¸åŒç±»å‹çš„é¡¹ç›®
      if (currentView === 'apis') {
        alert('åˆ›å»º API åŠŸèƒ½å¼€å‘ä¸­...');
      } else if (currentView === 'datasources') {
        alert('åˆ›å»ºæ•°æ®æºåŠŸèƒ½å¼€å‘ä¸­...');
      } else if (currentView === 'groups') {
        alert('åˆ›å»ºåˆ†ç»„åŠŸèƒ½å¼€å‘ä¸­...');
      }
    }

    // æ˜¾ç¤ºæˆåŠŸæç¤º
    function showSuccess(message) {
      const alertDiv = document.createElement('div');
      alertDiv.className = 'alert alert-success';
      alertDiv.textContent = message;

      const contentBody = document.getElementById('contentBody');
      contentBody.insertBefore(alertDiv, contentBody.firstChild);

      setTimeout(() => alertDiv.remove(), 3000);
    }

    // æ˜¾ç¤ºé”™è¯¯æç¤º
    function showError(message) {
      const alertDiv = document.createElement('div');
      alertDiv.className = 'alert alert-error';
      alertDiv.textContent = message;

      const contentBody = document.getElementById('contentBody');
      contentBody.insertBefore(alertDiv, contentBody.firstChild);

      setTimeout(() => alertDiv.remove(), 5000);
    }

    // äº‹ä»¶ç›‘å¬
    document.querySelectorAll('.nav-item').forEach(item => {
      item.addEventListener('click', () => {
        switchView(item.dataset.view);
      });
    });

    // åˆå§‹åŒ–
    window.addEventListener('load', async () => {
      const authOk = await checkAuth();
      if (authOk) {
        loadAPIs();
      }
    });
  </script>
</body>
</html>
